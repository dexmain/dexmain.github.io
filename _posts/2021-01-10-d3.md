---
title: ssh Permission denied (publickey)
categories: [dev]
comments: true
---

## 로컬 서버에 있는 파일을 원격 서버로 이동시키는 과정
scp dexmain/httpd-2.4.4-win64-VS16/Apache24/htdocs ubuntu@-.--.---.--:/home/<br>

## 오류 발생
Permission denied (publickey)<br><br>
※ sshd_config 파일을 수정해야한다고 한다.<br><br>

## 명령어 실행 (ssh 접속 후)
vi /etc/ssh/sshd_config <br>
또는 nano /etc/ssh/sshd_config<br>
※ /etc/ssh/sshd_config : openssh server 설치 당시<br> default로 지정된 경로인 듯 하다.<br>

## 행 수정
PasswordAuthentication no -> yes<br>
#PermitRootLogin prohibit-password -> # 제거 후 yes<br>

## ssh 재접속
sudo service ssh restart<br>

## 재시도 후 또 다른 오류 발생
ssh: connect to host -.--.---.-- port 22: Connection refused<br>
lost connection<br>

## 오류 원인 정리
1. ssh service 가 정상적으로 작동하지 않음
2. 잘못된 실행 정보 (호스트, 사용자, 암호, 포트)
3. 사용하려는 포트 닫힘
4. ssh 미설치
5. 방화벽으로 인한 ssh연결 차단

## 찾아낸 방법들 시도
nano /etc/ssh/sshd_config <br>
#port 22 -> # 제거<br>
sudo service ssh restart <br>
실패<br>

## sudo lsof -i -n -P | grep LISTEN 명령어로 수신포트 확인
22번 포트가 보이지 않는다.

# ssh 접속 불가
ssh 서버 접속불가<br>어디서부터 잘못된 것일까?
맨 처음이 화근이였다.<br>
scp로 파일이동시키는 명령어를 로컬서버에서<br>
사용했어야 했는 데 원격지에서 시도했다.<br>
그로 인한 오류가 발생했고<br>
그 것을 수정하려고 엄한 것을 건드렸던 것이다.<br>
그래서 결국 지금은 aws 인스턴스 종료 후<br>
새로운 인스턴스를 생성했다.
다음 화에 계속..
